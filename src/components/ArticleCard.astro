---
import { Image } from "astro:assets";

interface Tag {
    title: string;
    slug: { current: string };
}

interface Props {
    title: string;
    slug: string;
    category: string;
    image?: string;
    excerpt?: string;
    featured?: boolean;
    tags?: Tag[];
}

const {
    title,
    slug,
    category,
    image,
    excerpt,
    featured = false,
    tags = [],
} = Astro.props;

// Placeholder image if none provided
const imageUrl = image || `https://picsum.photos/seed/${slug}/800/600`;
---

<div class:list={["article-card", { featured }]}>
    <span class="article-card-category">{category}</span>
    <a href={`/article/${slug}`} class="article-card-link">
        <div class="article-card-image">
            <Image
                src={imageUrl}
                alt={title}
                width={800}
                height={600}
                loading="lazy"
                decoding="async"
            />
        </div>
        <div class="article-card-content">
            <h2 class="article-card-title">{title}</h2>
            {excerpt && <p class="article-card-excerpt">{excerpt}</p>}
        </div>
    </a>
    {
        tags && tags.length > 0 && (
            <div class="article-card-tags">
                {tags.map((tag) => (
                    <a
                        href={`/tag/${tag.slug.current}`}
                        class="article-card-tag"
                    >
                        {tag.title}
                    </a>
                ))}
            </div>
        )
    }
</div>
